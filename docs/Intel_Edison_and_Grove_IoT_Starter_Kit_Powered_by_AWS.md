---
name: Intel® Edison and Grove IoT Starter Kit Powered by AWS
category: Discontinued
bzurl:  https://www.amazon.com/dp/B0168KU5FK
oldwikiname: Intel® Edison and Grove IoT Starter Kit Powered by AWS
prodimagename:
surveyurl: https://www.research.net/r/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS
sku:
---
![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/Aws_kit_wiki_cover.JPG)

_Main articles: Start here [Grove IoT Starter Kits Powered by AWS](/Grove_IoT_Starter_Kits_Powered_by_AWS "Grove IoT Starter Kits Powered by AWS") , [Intel Edison](https://software.intel.com/en-us/iot/library/edison-getting-started)_

Designed for expert makers, entrepreneurs, and industrial IoT companies, the Intel Edison module provides easier prototyping with a fully open source hardware and software development environment. It supports Wi-Fi and BLE 4.0 connectivity. This kit contains eleven selective Grove sensors and actuators for you to track indoor environment as well as to create smart-house applications.

[![](https://github.com/SeeedDocument/Seeed-WiKi/raw/master/docs/images/300px-Get_One_Now_Banner-ragular.png)](https://www.amazon.com/dp/B0168KU5FK)

##  Included in the Box

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/Aws_kit_edison.JPG) 

| Parts                                                                                                                                                                      | Wiki                                                                                                                                     |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| [Intel® Edison for Arduino](http://www.seeedstudio.com/depot/Intel-Edison-for-Arduino-p-2149.html)                                                                         | [Read Here](https://software.intel.com/en-us/iot/library/edison-getting-started)                                                         |
| [Base Shield](http://www.seeedstudio.com/depot/Base-Shield-V2-p-1378.html?cPath=98_16)                                                                                     | [ Read Here](/Base_Shield_V2 "Base shield v2")                                                                                           |
| [Grove - Temperature&Humidity Sensor (High-Accuracy & Mini)](http://www.seeedstudio.com/depot/Grove-TemperatureHumidity-Sensor-HighAccuracy-Mini-p-1921.html?cPath=25_125) | [ Read Here](/Grove-TemptureAndHumidity_Sensor-High-Accuracy_AndMini-v1.0 "Grove - Tempture&Humidity Sensor (High-Accuracy &Mini) v1.0") |
| [Grove - Moisture Sensor](http://www.seeedstudio.com/depot/Grove-Moisture-Sensor-p-955.html?cPath=25_27)                                                                   | [ Read Here](/Grove-Moisture_Sensor "Grove - Moisture Sensor")                                                                           |
| [Grove - Light Sensor](http://www.seeedstudio.com/depot/Grove-Light-Sensor-p-746.html?cPath=25_27)                                                                         | [ Read Here](/Grove-Light_Sensor "Grove - Light Sensor")                                                                                 |
| [Grove - UV Sensor](http://www.seeedstudio.com/depot/Grove-UV-Sensor-p-1540.html?cPath=25_27)                                                                              | [ Read Here](/Grove-UV_Sensor "Grove - UV Sensor")                                                                                       |
| [Grove - PIR Motion Sensor](http://www.seeedstudio.com/depot/Grove-PIR-Motion-Sensor-p-802.html?cPath=25_31)                                                               | [ Read Here](/Grove-PIR_Motion_Sensor "Grove - PIR Motion Sensor")                                                                       |
| [Grove - Encoder](http://www.seeedstudio.com/depot/Grove-Encoder-p-1352.html?cPath=85_52)                                                                                  | [ Read Here](/Grove-Encoder "Grove - Encoder")                                                                                           |
| [Grove - Button](http://www.seeedstudio.com/depot/Grove-Button-p-766.html)                                                                                                 | [ Read Here](/Grove-Button "Grove - Button")                                                                                             |
| [Grove - LCD RGB Backlight](http://www.seeedstudio.com/depot/Grove-LCD-RGB-Backlight-p-1643.html?cPath=34_36)                                                              | [ Read Here](/Grove-LCD_RGB_Backlight "Grove - LCD RGB Backlight")                                                                       |
| [Grove - Relay](http://www.seeedstudio.com/depot/Grove-Relay-p-769.html?cPath=39_42)                                                                                       | [ Read Here](/Grove-Relay "Grove - Relay")                                                                                               |
| [Grove - Servo](http://www.seeedstudio.com/depot/Grove-Servo-p-1241.html?cPath=39_41)                                                                                      | [ Read Here](/Grove-Servo "Grove - Servo")                                                                                               |
| [Grove - Buzzer](http://www.seeedstudio.com/depot/Grove-Buzzer-p-768.html?cPath=38)                                                                                        | [ Read Here](/Grove-Buzzer "Grove - Buzzer")                                                                                             |
| USB Cable; 480mm-Black                                                                                                                                                     |                                                                                                                                          |
| USB Wall Power Supply                                                                                                                                                      |                                                                                                                                          |

##  Features

*   Out-of-the-box, plug and play, no breadboard or soldering work required.

*   Fully compliant with AWS's services and AWS's practices.

*   Step-by-step tutorials for developers and makers for quicker prototyping.

##  Getting Started

###   Configure Your AWS IoT Service

Visit amazone  [AWS console](http://console.aws.amazon.com), register and logon your account.

1. Goto the dashboard, click Service --&gt; AWS IoT


![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_LinkIt_starter_kit_click_iot.png)

2. Click Get started


![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_LinkIt_starter_kit_click_get_started.jpg)

3. Create a new user


![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_LinkIt_starter_kit_create_a_new_user.png)

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_LinkIt_starter_kit_create_a_new_user2.png)

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_LinkIt_starter_kit_create_a_new_user3.png)

4. Save user name and download Security Credentials


![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_Security_Credentials1.png)

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_Security_Credentials2.png)


5. Seeting Attach Policy with AdministratorAccess


![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_Security_Credentials3.png)

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_Security_Credentials4.png)

6. Create a thing


At this section you can also refer to the [Beagle Bone wiki](/Beagle_Bone_Green_and_Grove_IoT_Starter_Kit_Powered_by_AWS) for another way to create a thing and finish the left tasks. The difference is Beagle Bone didn’t use AWS CLI tool to Get Certifications.

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_create_a_thing1.png)

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_create_a_thing2.png)

###   Setting up AW IoT device SDK on the intel edison board

**Before you begin**

*   Make sure you have run the configure_edison --setup command to set up your board

*   Make sure your Intel® Edison board is online via your local Wi-Fi network (should occur during configure_edison setup)

*   Login ediosn console with ssh(Use putty or Xshell).

**Install AWS CLI **

The AWS CLI is a way to manage your AWS services from your board.  You need this first in order to download the SDK.

1.First, you need to install pip (Python package manager):

<pre>
curl https://bootstrap.pypa.io/ez_setup.py -o - | python
easy_install pip
</pre>

2.Next, install the AWS CLI with pip:

<pre>
pip install awscli
</pre>

Note: In order to view the help files ("aws iot help") you need to install Groff and  a non-BusyBox version of less.

3.For Groff:

<pre>
wget http://ftp.gnu.org/gnu/groff/groff-1.22.3.tar.gz
tar -zxvf groff-1.22.3.tar.gz
cd groff-1.22.3
./configure
make
make install
export PATH=$PATH:/usr/local/bin/
cd ~
</pre>

4.For Less:
First rename the old version of less

<pre>
mv /usr/bin/less /usr/bin/less-OLD
Then install the new version of less
wget http://www.greenwoodsoftware.com/less/less-458.zip
unzip less-458.zip
cd less-458
chmod 777 *
./configure
make
make install
cd ~
</pre>

5.To make sure everything has installed correctly, run the iot help file:

<pre>
aws iot help
</pre>

**Get AWS credentials:**

At this point, you should have AWS CLI installed. And the Access ID and Key you have download before, configure AWS and enter the ID and Key with:

<pre>
aws configure
</pre>

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli1.png)
![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli2.png)

1.First create a folder to store your certificates in:

<pre>
$ mkdir aws_certs
$ cd aws_certs
</pre>

2.Generate a private key with open ssl:

<pre>
openssl genrsa -out privateKey.pem 2048
openssl req -new -key privateKey.pem -out cert.csr
</pre>

3.Fill out the fields with your info.

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli3.png)

4.Run the following to activate the certificate:

<pre>
aws iot create-certificate-from-csr --certificate-signing-request file://cert.csr --set-as-active &gt; certOutput.txt
</pre>

5.Run the following to save the certificate into a cert.pem file:

<pre>
aws iot describe-certificate --certificate-id &lt;certificate ID&gt; --output text --query certificateDescription.certificatePem  &gt; cert.pem
</pre>

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli4.png)

NOTE: Replace &lt;certificate ID&gt; with the ID stored in the "certificateId" field in certOutput.txt. To view the file enter: more certOutput.txt

6.Create a Json policy document for AWS IoT SDK:

*   Copy the following text (ctrl-c):
<pre>
{
"Version": "2012-10-17",
"Statement": [{
"Effect": "Allow",
"Action":["iot:*"],
"Resource": ["*"]
}]
}
</pre>

*   Enter vi policy.doc hit a and right click to paste the text
*   Hit escape and type in :wq to save and quit

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli5.png)

7.First enter:

<pre>
 aws iot create-policy --policy-name PubSubToAnyTopic --policy-document file://policy.doc
</pre>

Notice:The policy name can be anything.

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli6.png)

8.After that a policy and a certificate can be shown on your AWS console.

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli7.png)

9.Then attach the policy to the certificate with:

<pre>
aws iot attach-principal-policy --principal &lt;principal arn&gt; --policy-name "PubSubToAnyTopic"
</pre>

NOTE: replace &lt;principal arn&gt; with the  value stored in "certifcateArn" in the outputCert.txt file.

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli8.png)

10.You should see your certificate has attach to your policy.

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli9.png)

**Use MQTT to subscribe and publish to AWS**

*   Now that the certificates are in order we can use MQTT to subscribe and publish to the cloud.
*   First get the root CA pem file:
<pre>
curl https://www.symantec.com/content/en/us/enterprise/verisign/roots/VeriSign-Class%203-Public-Primary-Certification-Authority-G5.pem &gt; rootCA.pem
</pre>

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_get_aws_cli10.png)

###   Coding your application with nodejs

1.Create a nodejs project

<pre>
cd ~
mkdir aws_nodejs &amp;&amp; cd aws_nodejs
npm init
npm install --save aws-iot-device-sdk
touch main.js
</pre>

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_coding1.png)

2.Copy and save demo code to main.js

<pre>
vi main.js
</pre>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="javascript source-javascript"><pre class="de1"><span class="co1">// Plug Grove - Relay to base shield port D2</span>
<span class="co1">// Plug Grove - Temperature&amp;Huminity(High quality) to i2c port</span>

<span class="kw1">var</span> sensor1 <span class="sy0">=</span> require<span class="br0">(</span><span class="st0">'jsupm_th02'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">var</span> th02 <span class="sy0">=</span> <span class="kw1">new</span> sensor1.<span class="me1">TH02</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>

<span class="kw1">var</span> sensor2 <span class="sy0">=</span> require<span class="br0">(</span><span class="st0">'jsupm_grove'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">var</span> relay <span class="sy0">=</span> <span class="kw1">new</span> sensor2.<span class="me1">GroveRelay</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span>

<span class="co1">// Simulate device value</span>
<span class="kw1">var</span> temp <span class="sy0">=</span> <span class="nu0">24.00</span><span class="sy0">;</span>
<span class="kw1">var</span> humi <span class="sy0">=</span> <span class="nu0">50</span><span class="sy0">;</span>
<span class="kw1">var</span> relayState <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
<span class="kw1">var</span> reported_state <span class="sy0">=</span> <span class="br0">{</span><span class="st0">"Temperature"</span><span class="sy0">:</span>temp<span class="sy0">,</span> <span class="st0">"Humidity"</span><span class="sy0">:</span> humi<span class="sy0">,</span> <span class="st0">"RelayState"</span><span class="sy0">:</span> relayState<span class="br0">}</span><span class="sy0">;</span>

<span class="co1">//</span>
<span class="co1">// Client token value returned from thingShadows.update() operation//app deps</span>
<span class="kw1">const</span> thingShadow <span class="sy0">=</span> require<span class="br0">(</span><span class="st0">'./node_modules/aws-iot-device-sdk/thing'</span><span class="br0">)</span><span class="sy0">;</span><span class="co1">// Plug Grove - Relay to base shield port D2</span>
<span class="co1">// Plug Grove - Temperature&amp;Huminity(High quality) to i2c port</span>

<span class="kw1">var</span> sensor1 <span class="sy0">=</span> require<span class="br0">(</span><span class="st0">'jsupm_th02'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">var</span> th02 <span class="sy0">=</span> <span class="kw1">new</span> sensor1.<span class="me1">TH02</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>

<span class="kw1">var</span> sensor2 <span class="sy0">=</span> require<span class="br0">(</span><span class="st0">'jsupm_grove'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">var</span> relay <span class="sy0">=</span> <span class="kw1">new</span> sensor2.<span class="me1">GroveRelay</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy0">;</span>

<span class="kw1">var</span> awsIot <span class="sy0">=</span> require<span class="br0">(</span><span class="st0">'aws-iot-device-sdk'</span><span class="br0">)</span><span class="sy0">;</span>

<span class="kw1">var</span> thingShadows <span class="sy0">=</span> awsIot.<span class="me1">thingShadow</span><span class="br0">(</span><span class="br0">{</span>
    keyPath<span class="sy0">:</span> <span class="st0">'/home/root/aws_certs/privateKey.pem'</span><span class="sy0">,</span>
    certPath<span class="sy0">:</span> <span class="st0">'/home/root/aws_certs/cert.pem'</span><span class="sy0">,</span>
    caPath<span class="sy0">:</span> <span class="st0">'/home/root/aws_certs/rootCA.pem'</span><span class="sy0">,</span>
    clientId<span class="sy0">:</span> <span class="st0">'myAwsClientId'</span><span class="sy0">,</span>
    region<span class="sy0">:</span> <span class="st0">'us-east-1'</span>
<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>

<span class="co1">// Simulate device value</span>
<span class="kw1">var</span> temp <span class="sy0">=</span> <span class="nu0">24.00</span><span class="sy0">;</span>
<span class="kw1">var</span> humi <span class="sy0">=</span> <span class="nu0">50</span><span class="sy0">;</span>
<span class="kw1">var</span> relayState <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>

<span class="co1">//</span>
<span class="co1">// Client token value returned from thingShadows.update() operation</span>
<span class="co1">//</span>
<span class="kw1">var</span> clientTokenUpdate<span class="sy0">;</span>

<span class="kw1">var</span> thingName <span class="sy0">=</span> <span class="st0">"EdisonDemo"</span><span class="sy0">;</span>
thingShadows.<span class="me1">on</span><span class="br0">(</span><span class="st0">'connect'</span><span class="sy0">,</span> <span class="kw1">function</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    thingShadows.<span class="me1">register</span><span class="br0">(</span>thingName<span class="br0">)</span><span class="sy0">;</span>
    console.<span class="me1">log</span><span class="br0">(</span>thingName <span class="sy0">+</span> <span class="st0">' registering...'</span><span class="br0">)</span><span class="sy0">;</span>

    setInterval<span class="br0">(</span><span class="kw1">function</span><span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
      readSensor<span class="br0">(</span>sendData<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span><span class="sy0">,</span> <span class="nu0">5000</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>

thingShadows.<span class="me1">on</span><span class="br0">(</span><span class="st0">'status'</span><span class="sy0">,</span> <span class="kw1">function</span><span class="br0">(</span>thingName<span class="sy0">,</span> stat<span class="sy0">,</span> clientToken<span class="sy0">,</span> stateObject<span class="br0">)</span> <span class="br0">{</span>
    console.<span class="me1">log</span><span class="br0">(</span><span class="st0">'   received '</span><span class="sy0">+</span>stat<span class="sy0">+</span><span class="st0">' on '</span><span class="sy0">+</span>thingName<span class="sy0">+</span><span class="st0">': '</span><span class="sy0">+</span> JSON.<span class="me1">stringify</span><span class="br0">(</span>stateObject<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">//</span>
    <span class="co1">// These events report the status of update(), get(), and delete()</span>
    <span class="co1">// calls.  The clientToken value associated with the event will have</span>
    <span class="co1">// the same value which was returned in an earlier call to get(),</span>
    <span class="co1">// update(), or delete().  Use status events to keep track of the</span>
    <span class="co1">// status of shadow operations.</span>
    <span class="co1">//</span>
<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>

thingShadows.<span class="me1">on</span><span class="br0">(</span><span class="st0">'delta'</span><span class="sy0">,</span> <span class="kw1">function</span><span class="br0">(</span>thingName<span class="sy0">,</span> stateObject<span class="br0">)</span> <span class="br0">{</span>
    console.<span class="me1">log</span><span class="br0">(</span><span class="st0">'    received delta on '</span><span class="sy0">+</span>thingName<span class="sy0">+</span><span class="st0">': '</span><span class="sy0">+</span> JSON.<span class="me1">stringify</span><span class="br0">(</span>stateObject<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>

    <span class="kw1">if</span><span class="br0">(</span>stateObject.<span class="me1">state</span>.<span class="me1">RelayState</span> <span class="sy0">==</span> <span class="kw2">true</span><span class="br0">)</span><span class="br0">{</span>
        relay.<span class="me1">on</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        console.<span class="me1">log</span><span class="br0">(</span><span class="st0">'Relay is on.'</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw1">else</span> <span class="kw1">if</span><span class="br0">(</span>stateObject.<span class="me1">state</span>.<span class="me1">RelayState</span> <span class="sy0">==</span> <span class="kw2">false</span><span class="br0">)</span> <span class="br0">{</span>
        relay.<span class="me1">off</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        console.<span class="me1">log</span><span class="br0">(</span><span class="st0">'Relay is off.'</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>

thingShadows.<span class="me1">on</span><span class="br0">(</span><span class="st0">'timeout'</span><span class="sy0">,</span> <span class="kw1">function</span><span class="br0">(</span>thingName<span class="sy0">,</span> clientToken<span class="br0">)</span> <span class="br0">{</span>
    console.<span class="me1">log</span><span class="br0">(</span><span class="st0">'    received timeout on '</span><span class="sy0">+</span>thingName <span class="sy0">+</span> <span class="st0">' with token: '</span><span class="sy0">+</span> clientToken<span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">//</span>
    <span class="co1">// In the event that a shadow operation times out, you'll receive</span>
    <span class="co1">// one of these events.  The clientToken value associated with the</span>
    <span class="co1">// event will have the same value which was returned in an earlier</span>
    <span class="co1">// call to get(), update(), or delete().</span>
    <span class="co1">//</span>
<span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span>

<span class="kw1">function</span> readSensor<span class="br0">(</span>callback<span class="br0">)</span><span class="br0">{</span>
    temp <span class="sy0">=</span> th02.<span class="me1">getTemperature</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    humi <span class="sy0">=</span> th02.<span class="me1">getHumidity</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    relayState <span class="sy0">=</span> relay.<span class="me1">isOn</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>

    callback<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span><span class="sy0">;</span>

<span class="kw1">function</span> sendData<span class="br0">(</span><span class="br0">)</span><span class="br0">{</span>
    <span class="kw1">var</span> reported_state <span class="sy0">=</span> <span class="br0">{</span><span class="st0">"Temperature"</span><span class="sy0">:</span>temp<span class="sy0">,</span> <span class="st0">"Humidity"</span><span class="sy0">:</span> humi<span class="sy0">,</span> <span class="st0">"RelayState"</span><span class="sy0">:</span> relayState<span class="br0">}</span><span class="sy0">;</span>
    <span class="kw1">var</span> relayTH02State <span class="sy0">=</span> <span class="br0">{</span><span class="st0">"state"</span><span class="sy0">:</span><span class="br0">{</span>desired<span class="sy0">:</span> reported_state<span class="br0">}</span><span class="br0">}</span><span class="sy0">;</span>  <span class="co1">// Use desired attribute can receive delta</span>
    <span class="co1">// More info refer to http://docs.aws.amazon.com/iot/latest/developerguide/thing-shadow-mqtt.html#update-pub-sub-message</span>

    clientTokenUpdate <span class="sy0">=</span> thingShadows.<span class="me1">update</span><span class="br0">(</span>thingName<span class="sy0">,</span> relayTH02State<span class="br0">)</span><span class="sy0">;</span>

    <span class="kw1">if</span> <span class="br0">(</span>clientTokenUpdate <span class="sy0">===</span> <span class="kw2">null</span><span class="br0">)</span>
    <span class="br0">{</span>
       console.<span class="me1">log</span><span class="br0">(</span><span class="st0">'update shadow failed, operation still in progress'</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
<span class="br0">}</span><span class="sy0">;</span></pre></div></div>

3.start nodejs application

*   Plug Grove sensors just like below

*   Relay - D2

*   Temperature sensor - i2c port

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_coding5.png)

<pre>
  node main.js
</pre>

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_coding2.png)

4.Watch data on AWS console

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_coding3.png)

5.Update shadow to change relay state

![](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/img/AWS_Edison_starter_kit_coding4.png)

6.If uploading succeed Grove - Relay will turn on.

##  Resources

*   [aws-iot-intel github page](https://github.com/intel-iot-devkit/avs-alexa-iot-intel-speech-enabling-kit)

*   [aws-iot-device-sdk-js github page](https://github.com/aws/aws-iot-device-sdk-js)

*   [Intel UPM github page](https://github.com/intel-iot-devkit/upm)

*   [AWS IoT Intel Github Page](https://github.com/intel-iot-devkit/avs-alexa-iot-intel-speech-enabling-kit)

*   [AWS IoT MQTT update topic formate](http://docs.aws.amazon.com/iot/latest/developerguide/thing-shadow-mqtt.html#update-pub-sub-message)

*   [【PDF】AWS IoT Developer Guide](https://github.com/SeeedDocument/Intel_Edison_and_Grove_IoT_Starter_Kit_Powered_by_AWS/raw/master/res/AWS_IoT_Developer_Guide.pdf)

*   [【Wiki】Main Page for Grove IoT Starter Kits Powered by AWS](/Grove_IoT_Starter_Kits_Powered_by_AWS)

*   [Getting started with Edison](https://software.intel.com/en-us/iot/library/edison-getting-started)

## Tech Support
Please submit any technical issue into our [forum](http://forum.seeedstudio.com/). <br /><p style="text-align:center"><a href="https://www.seeedstudio.com/act-4.html?utm_source=wiki&utm_medium=wikibanner&utm_campaign=newproducts" target="_blank"><img src="https://github.com/SeeedDocument/Wiki_Banner/raw/master/new_product.jpg" /></a></p>